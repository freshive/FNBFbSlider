// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
(function(e,t,n){"use strict";function s(t,n){this.index=1;this.visible=n.thumbvisible;this.thumbHeight=n.thumbheight;this.$element=e(t).height(n.height).addClass("slider");this.options=e.extend({},i,n);this._defaults=i;this._name=r;this.init()}var r="FNBFbSlider",i={interval:4e3,dataUrl:"//fnbsocialmedia.co.za/fnbhub/api/sliderimages?callback=?"};s.prototype.init=function(){e.when(this.getData()).then(e.proxy(function(t){t=this.sanitizeData(t);this.numImages=t.length;this.$element.append(this.buildGallery(t));this.$element.append(this.buildThumbs(t,this.options.height));setInterval(e.proxy(function(){this.goToSlide(this.index-1)},this),this.options.interval)},this))};s.prototype.getData=function(){return e.getJSON(this.options.dataUrl)};s.prototype.sanitizeData=function(t){t=e(t).filter(function(){return this.Enabled});return t};s.prototype.buildGallery=function(t){var n=e(document.createElement("div")).addClass("gallery"),r=0;e.each(t,function(){var t=e(document.createElement("a")).attr("href",this.Url),i=document.createElement("img");i.setAttribute("src",this.ImageUrl);i.setAttribute("data-index",r+=1);t.append(i);n.append(t)});return this.$gallery=n};s.prototype.buildThumbs=function(t,n){var r=e(document.createElement("div")).height(n).addClass("thumbs"),i=0;e.each(t,function(){var t=e(document.createElement("a")).attr("href",this.Url),n=document.createElement("img");n.setAttribute("data-index",i+=1);n.setAttribute("src",this.ThumbUrl);t.append(n);r.append(t)});r.prepend(r.find("img").slice(-this.visible).clone().addClass("cloned"));r.append(r.find("img").slice(this.visible,this.visible+this.visible).clone().addClass("cloned"));return this.$thumbs=r};s.prototype.goToSlide=function(t){var n=t<this.index?-1:1,r=Math.abs(this.index-t),i=105*n*r;this.showMainImage(t);this.$thumbs.stop().animate({scrollTop:"+="+i},400,e.proxy(function(){var e;if(t===0){e=(this.numImages+this.visible)*this.thumbHeight;this.$thumbs.scrollTop(e);t=this.numImages}else if(t>this.numImages){e=this.visible*this.thumbHeight;this.$thumbs.scrollTop(e);t=1}this.index=t},this));return!1};s.prototype.showMainImage=function(e){e===0?e=this.numImages:e>this.numImages&&(e=1);this.$gallery.find("img").fadeOut(400);this.$gallery.find("[data-index='"+e+"']").fadeIn(400)};e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})};e(t).on("load",function(){e('[data-fnbFbSlider="true"]').each(function(){var t=e(this),n=t.data();t.FNBFbSlider(n)})})})(jQuery,window);